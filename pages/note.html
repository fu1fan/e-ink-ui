<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/bootstrap.min.css">
    <link rel="stylesheet" href="./src/paper.css">
    <title>记事本</title>
</head>

<body>
    <div id="head">
        <span><a id="backBtn" href="javascript:backToMain()">&nbsp;&lt;</a> 简单记事本（Beta）</span>
    </div>
    <div class="container">
        <p id="main">点击输入文字...</p>
        <button id="cnkbd">中文键盘</button> <button id="enkbd">英文键盘</button>
    </div>
    <script src="./src/jquery.min.js"></script>
    <script src="./src/piapi.js"></script>
    <script>
        function upd() {
            piapi.updateImage()
        }

        function GetUrlByParamName(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var URL = decodeURI(window.location.search);
            var r = URL.substr(1).match(reg);
            if (r != null) {
                //decodeURI() 函数可对 encodeURI() 函数编码过的 URI 进行解码  
                return decodeURI(r[2]);
            };
            return null;
        }

        var receivedText = GetUrlByParamName("text");

        if (receivedText) {
            $("#main").html(receivedText);
            localStorage.notetext = receivedText;
        }else if (localStorage.notetext) {
            $("#main").html(localStorage.notetext)
        }

        $("#main").click(function () {
            location.href = "./keyboard.html?from=note.html&text=" + $("#main").html();
        })

        $("#cnkbd").click(function () {
            location.href = "./keyboard-cn.html?from=note.html&text=" + $("#main").html();
        })

        $("#enkbd").click(function () {
            location.href = "./keyboard.html?from=note.html&text=" + $("#main").html();
        })

        $("#backBtn").click(function () {
            location.href = "./main.html?refresh=1";
        })

        upd()

    </script>
</body>

</html>